<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>PöbelSlotmaschine</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    color: #e0e0e0;
    margin: 0;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }

  h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: #f7c948;
    text-shadow: 0 0 5px #f7c948aa;
  }

  #machine {
    background: #0f3460;
    border-radius: 1rem;
    padding: 2rem 3rem;
    box-shadow: 0 0 20px #53354a;
    display: flex;
    gap: 1rem;
    max-width: 500px;
    width: 90vw;
    justify-content: center;
  }

  .slot {
    background: #16213e;
    border-radius: 0.8rem;
    width: 30%;
    min-height: 130px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.3rem;
    line-height: 1.3;
    color: #e0e0e0;
    padding: 0.5rem;
    box-shadow: inset 0 0 8px #f7c948aa;
    user-select: none;
    white-space: pre-line; /* damit \n sichtbar sind */
    text-align: center;
    transition: font-size 0.3s ease;
  }

  button#spinBtn {
    margin-top: 2rem;
    background: #f7c948;
    border: none;
    padding: 0.75rem 2rem;
    border-radius: 9999px;
    font-weight: 700;
    font-size: 1.3rem;
    color: #16213e;
    cursor: pointer;
    box-shadow: 0 0 15px #f7c948bb;
    transition: background-color 0.3s ease;
  }

  button#spinBtn:hover {
    background: #d6b83c;
  }

  /* Responsive */
  @media (max-width: 480px) {
    #machine {
      flex-direction: column;
      max-width: 320px;
      padding: 1rem 1.5rem;
    }
    .slot {
      width: 100%;
      min-height: 100px;
      font-size: 1.1rem;
    }
    button#spinBtn {
      width: 100%;
      font-size: 1.2rem;
    }
  }
</style>
</head>
<body>

<h1>PöbelSlotmaschine</h1>

<div id="machine">
  <div id="slot1" class="slot">--</div>
  <div id="slot2" class="slot">--</div>
  <div id="slot3" class="slot">--</div>
</div>

<button id="spinBtn">Dreh den Slot!</button>

<script>
  let words = null;

  async function loadWords() {
    try {
      const response = await fetch('words.json');
      if (!response.ok) throw new Error('Fehler beim Laden der Wortliste');
      words = await response.json();
    } catch (e) {
      alert('Wortliste konnte nicht geladen werden: ' + e.message);
      console.error(e);
    }
  }

  function getRandom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  // Slot animieren, mit option bold
  function spinSlot(id, text, bold = false) {
    const el = document.getElementById(id);
    el.style.fontWeight = bold ? '900' : '600';
    el.textContent = text;
  }

  async function spin() {
    if (!words) await loadWords();

    const adj1 = getRandom(words.adj1);
    // Array der Geschlechter-Objekte für Zufallsauswahl
    const genders = [words.masc, words.fem];
    const genderBlock = getRandom(genders);

    const adj2 = getRandom(genderBlock.adj2);
    const noun = getRandom(genderBlock.nouns);

    spinSlot("slot1", adj1, true);
    spinSlot("slot2", adj2);
    spinSlot("slot3", noun, true);
  }

  document.getElementById('spinBtn').addEventListener('click', spin);

  // Optional: Beim Laden sofort laden und direkt generieren
  window.addEventListener('load', async () => {
    await loadWords();
    spin();
  });
</script>

</body>
</html>
